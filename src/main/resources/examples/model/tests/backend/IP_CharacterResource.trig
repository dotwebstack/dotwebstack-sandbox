@prefix elmo: <http://dotwebstack.org/def/elmo#>.

@prefix dc: <http://purl.org/dc/elements/1.1>.
@prefix html: <http://www.w3.org/1999/xhtml/vocab#>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.

@prefix stage: <http://localhost:8080/stage#>.
@prefix lotro: <http://localhost:8080/def/lotr#>.

graph stage:TestTheatre {
  stage:IP_CharacterResource a elmo:InformationProduct;
    elmo:backend stage:MyLocalSparqlBackend;
    elmo:query '''
      prefix wdrs: <http://www.w3.org/2007/05/powder-s#>
      construct {
        <@IDSUBJECT@> ?p ?o.
        ?o rdfs:label ?olabel.
        <@IDSUBJECT@> wdrs:isDescribedBy <@DOCSUBJECT@>
      }
      where {
        graph <@STAGE@> {
          <@IDSUBJECT@> ?p ?o
          OPTIONAL {
            ?o rdfs:label ?olabel
            FILTER (lang(?olabel)="@LANGUAGE@" or lang(?olabel)="")
          }
        }
      }
    ''';
  .
}