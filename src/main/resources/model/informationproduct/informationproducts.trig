GRAPH dbeerpedia:Theatre {

  dbeerpedia:IdFilter a elmo:TermParameter;
    elmo:name "id";
    elmo:shape [
      sh:datatype xsd:string;
      sh:minLength 2;
    ];
  .
  
  dbeerpedia:SubjectParameter a elmo:TermParameter;
    elmo:name "SUBJECT";
    elmo:shape [
      sh:datatype xsd:string
    ];
  .
  
  dbeerpedia:FteParam a elmo:TermParameter;
    elmo:name "fte";
    elmo:shape [
    	sh:datatype xsd:string;
    ];
  .
  
  dbeerpedia:TupleBreweries a elmo:InformationProduct;
    rdfs:label "Beer breweries in The Netherlands";
    elmo:backend dbeerpedia:Backend;
    elmo:resultType elmo-resulttype:Tuple;
    elmo:optionalParameter dbeerpedia:FteParam;
    elmo:query "SELECT ?naam WHERE { ?s rdfs:label ?naam . ?s a <http://dbeerpedia.org#Brewery> }";
  .
  
  dbeerpedia:TupleBrewery a elmo:InformationProduct;
    rdfs:label "A single beer brewery in The Netherlands with an ID equal to the supplied ID";
    elmo:backend dbeerpedia:Backend;
    elmo:resultType elmo-resulttype:Tuple;
    elmo:requiredParameter dbeerpedia:IdFilter;
    elmo:query """
      SELECT ?naam ?website ?kvk ?sinds ?provincie
        WHERE {
#  this type of binding not permitted on all sparql endpoints		
#          BIND(<http://dbeerpedia.org/id/brewery/${id}> as ?s)
#            ?s dbeerpedia:name ?naam ;
#  not in line with provided example data
#            dbeerpedia:yearOfFoundation ?sinds ;
#            dbeerpedia:fte ?fte ;
#            dbeerpedia:dateOfFoundation ?oprichting ;
#            dbeerpedia:place ?plaats .
          <http://dbeerpedia.org/id/brewery/${id}> dbeerpedia:name ?naam .
            OPTIONAL {<http://dbeerpedia.org/id/brewery/${id}> dbeerpedia:url ?website } .
            OPTIONAL {<http://dbeerpedia.org/id/brewery/${id}> dbeerpedia:kvk ?kvk} .
            OPTIONAL {<http://dbeerpedia.org/id/brewery/${id}> dbeerpedia:opgericht ?sinds } .
            OPTIONAL {<http://dbeerpedia.org/id/brewery/${id}> dbeerpedia:provincie ?provincie }.
         }
    """;
  .

  dbeerpedia:GraphBreweries a elmo:InformationProduct;
    rdfs:label "Beer breweries in The Netherlands";
    elmo:backend dbeerpedia:Backend;
    elmo:resultType elmo-resulttype:Graph;
    elmo:optionalParameter dbeerpedia:IdFilter;
    elmo:query "CONSTRUCT { ?s ?p ?o } WHERE { ?s ?p ?o . ?s a <http://dbeerpedia.org#Brewery> }";
  .

  dbeerpedia:ResourceInformationProduct a elmo:InformationProduct;
    elmo:requiredParameter dbeerpedia:SubjectParameter;
    elmo:backend dbeerpedia:Backend;
    elmo:query '''
      CONSTRUCT {
# fixed typo
#		<{$SUBJECT}> ?p ?o
		<${SUBJECT}> ?p ?o
      }
      WHERE {
#       <{$SUBJECT}> ?p ?o
        <${SUBJECT}> ?p ?o
      }
    ''';
  .
}
